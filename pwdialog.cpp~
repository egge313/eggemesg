#include "pwdialog.h"
#include "ui_pwdialog.h"
#include "userdata.h"
#include <QMessageBox>

PwDialog::PwDialog(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::PwDialog)
{
    ui->setupUi(this);
    //    connect(ui->buttonBox, SIGNAL(clicked()),
    //        this, SLOT(onButtonClick));
    // connect(ui->buttonBox, &QDialogButtonBox::accepted, this, SLOT(accept()));    
    //    connect(ui->buttonBox, &QDialogButtonBox::accepted, this, SLOT(accept));
    // connect(ui->buttonBox, &QDialogButtonBox::rejected, this, SLOT(reject));
}

void PwDialog::accept ()
{
  QMessageBox msgBox;
  UserData* userdata = NULL;


  switch (ui->tabWidget->currentIndex())
    {
    case 0:
      userdata = new UserData(ui->lineEditUser1->text(),
			      ui->lineEditPw1->text());
      QDialog::done(0);
      break;

    case 1:
      if (ui->lineEditPw2->text() !=
	  ui->lineEditPwRepeat2->text())
	{
	  msgBox.setText("Repeat the same password!");
	  msgBox.exec();
	  break;
	}
      userdata = new UserData(ui->lineEditUser2->text(),
			      ui->lineEditPw2->text());
      QDialog::done(0);
      break;
					 
    default:
      msgBox.setText("currentWidget not set");
      msgBox.exec();
    }

  //  QDialog::accept();
      QDialog::done(1);
}

void PwDialog::reject ()
{
        QDialog::done(1);
  //  QDialog::reject();
}

PwDialog::~PwDialog()
{
    delete ui;
}
